<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will You Be My Valentine?</title>
  <style>
    :root{
      --bg1:#0b0b14;
      --bg2:#140a18;
      --card:#ffffff10;
      --text:#f6f2ff;
      --muted:#c9c2d6;
      --accent:#ff4d8d;
      --accent2:#ffb3cc;
      --good:#35d07f;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 24px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, #ff4d8d33, transparent 60%),
        radial-gradient(1000px 700px at 90% 30%, #b84dff22, transparent 55%),
        radial-gradient(900px 700px at 50% 90%, #ffb3cc1f, transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      display:grid;
      place-items:center;
      padding:24px;
    }

    /* floating hearts */
    .hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .heart{
      position:absolute;
      width:14px; height:14px;
      transform: rotate(45deg);
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      opacity:.15;
      filter: blur(.1px);
      animation: floatUp linear infinite;
      border-radius:3px;
    }
    .heart:before, .heart:after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background:inherit;
      border-radius:50%;
    }
    .heart:before{left:-7px; top:0;}
    .heart:after{left:0; top:-7px;}
    @keyframes floatUp{
      from{ transform: translateY(110vh) rotate(45deg); }
      to{ transform: translateY(-20vh) rotate(45deg); }
    }

    .card{
      position:relative;
      z-index:1;
      width:min(680px, 100%);
      background: linear-gradient(180deg, #ffffff14, #ffffff08);
      border:1px solid #ffffff1f;
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding:28px;
      backdrop-filter: blur(10px);
    }
    .top{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    h1{
      font-size: clamp(26px, 3.5vw, 38px);
      margin:0;
      letter-spacing:.2px;
    }
    .sub{
      margin:10px 0 0;
      color:var(--muted);
      line-height:1.5;
      font-size: 15.5px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      margin-top:18px;
    }
    @media (max-width:640px){
      .row{grid-template-columns:1fr}
    }
    label{
      font-size:13px;
      color:#e8e2f2;
      opacity:.9;
      display:block;
      margin:0 0 7px;
    }
    input{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid #ffffff22;
      background:#0b0b1433;
      color:var(--text);
      outline:none;
      transition:.2s;
    }
    input:focus{
      border-color:#ff4d8d55;
      box-shadow:0 0 0 4px #ff4d8d22;
    }

    .codeBox{
      margin-top:16px;
      border-radius:18px;
      border:1px dashed #ffffff2f;
      background:#0000001c;
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 14px;
      color:#ffe3ee;
      word-break:break-all;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius:16px;
      background: linear-gradient(135deg, var(--accent), #b84dff);
      color:white;
      font-weight:700;
      letter-spacing:.2px;
      transition: transform .08s ease, filter .2s ease;
      box-shadow: 0 12px 30px rgba(255,77,141,.18);
      user-select:none;
    }
    .btn:active{ transform: scale(.98); }
    .btn.secondary{
      background:#ffffff14;
      border:1px solid #ffffff22;
      box-shadow:none;
      font-weight:600;
    }

    .actions{
      margin-top:16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .question{
      margin-top:18px;
      border-radius:18px;
      padding:16px;
      background: linear-gradient(180deg, #ff4d8d22, #ffffff08);
      border:1px solid #ffffff1f;
    }
    .question h2{
      margin:0 0 8px;
      font-size:18px;
    }
    .question p{
      margin:0;
      color:var(--muted);
      line-height:1.6;
      font-size:15px;
    }

    .bigButtons{
      margin-top:14px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    .yes{
      background: linear-gradient(135deg, var(--good), #8cffc1);
      color:#04140b;
      box-shadow: 0 12px 30px rgba(53,208,127,.18);
    }
    .no{
      background:#ffffff14;
      border:1px solid #ffffff22;
      position:relative;
    }

    .result{
      margin-top:16px;
      padding:14px 16px;
      border-radius:18px;
      border:1px solid #ffffff1f;
      background:#0000001a;
      display:none;
    }
    .result.show{display:block}
    .result strong{color:#ffd2e2}
    .tiny{
      margin-top:12px;
      color:#bdb6c9;
      font-size:12.5px;
      opacity:.9;
    }
    .footer{
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      color:#bdb6c9;
      font-size:12.5px;
      opacity:.9;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>

  <main class="card">
    <div class="top">
      <div>
        <h1>Will you be my Valentine? üíò</h1>
        <p class="sub">
          Fill in the names, generate a cute ‚Äúlove code‚Äù, then send this page link or screenshot to your girlfriend.
        </p>
      </div>
      <button class="btn secondary" id="makeHearts" type="button">‚ú® More hearts</button>
    </div>

    <div class="row">
      <div>
        <label for="yourName">Your name</label>
        <input id="yourName" placeholder="e.g. Liyema" autocomplete="off" />
      </div>
      <div>
        <label for="herName">Her name</label>
        <input id="herName" placeholder="e.g. Nomsa" autocomplete="off" />
      </div>
    </div>

    <div class="codeBox" aria-live="polite">
      <div class="code" id="codeText">LOVE-CODE: VAL-XXXX-XXXX</div>
      <button class="btn secondary" id="copyBtn" type="button">Copy code</button>
    </div>

    <div class="actions">
      <button class="btn" id="generateBtn" type="button">Generate love code</button>
      <button class="btn secondary" id="shareBtn" type="button">Copy message</button>
    </div>

    <section class="question">
      <h2 id="questionTitle">Hey ___, it‚Äôs ___ üíó</h2>
      <p id="questionBody">
        I made you a little love-code. If you accept, press ‚ÄúYES‚Äù below (or just text me ‚ÄúYES‚Äù).
      </p>

      <div class="bigButtons">
        <button class="btn yes" id="yesBtn" type="button">YES üíû</button>
        <button class="btn no" id="noBtn" type="button">NO üôà</button>
      </div>

      <div class="result" id="resultBox"></div>
      <div class="tiny">Tip: Rename the title in the browser tab if you want it to look extra personal.</div>
    </section>

    <div class="footer">
      <span id="dateLine"></span>
      <span>Made with ‚ù§Ô∏è ‚Äî press ‚ÄúGenerate‚Äù after typing names.</span>
    </div>
  </main>

  <script>
    // --- helpers ---
    const $ = (id) => document.getElementById(id);

    function pad2(n){ return String(n).padStart(2,"0"); }

    function slug(s){
      return (s || "")
        .trim()
        .toUpperCase()
        .replace(/[^A-Z0-9]/g,"")
        .slice(0,4) || "XXXX";
    }

    function rand(n){
      const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789"; // avoid confusing 0/O/1/I
      let out = "";
      for(let i=0;i<n;i++) out += chars[Math.floor(Math.random()*chars.length)];
      return out;
    }

    function makeCode(your, her){
      const now = new Date();
      const dd = pad2(now.getDate());
      const mm = pad2(now.getMonth()+1);
      // Format: VAL-<HER>-<YOU>-<DDMM>-<RND>
      return `VAL-${slug(her)}-${slug(your)}-${dd}${mm}-${rand(4)}`;
    }

    // --- UI update ---
    function updateText(){
      const your = $("yourName").value.trim() || "___";
      const her = $("herName").value.trim() || "___";
      $("questionTitle").textContent = `Hey ${her}, it‚Äôs ${your} üíó`;
      $("questionBody").textContent =
        `I made you a little love-code. If you accept, press ‚ÄúYES‚Äù below (or just text me ‚ÄúYES‚Äù).`;
      document.title = `Valentine for ${her} üíò`;
    }

    function generate(){
      const your = $("yourName").value.trim();
      const her = $("herName").value.trim();
      const code = makeCode(your, her);
      $("codeText").textContent = `LOVE-CODE: ${code}`;
      updateText();
      return code;
    }

    // --- copy actions ---
    async function copyToClipboard(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        const ok = document.execCommand("copy");
        ta.remove();
        return ok;
      }
    }

    // --- hearts generator ---
    function addHearts(count=18){
      const box = $("hearts");
      for(let i=0;i<count;i++){
        const h = document.createElement("div");
        h.className = "heart";
        h.style.left = Math.random()*100 + "vw";
        h.style.animationDuration = (6 + Math.random()*10) + "s";
        h.style.opacity = (0.08 + Math.random()*0.18).toFixed(2);
        h.style.transform = `translateY(110vh) rotate(45deg) scale(${0.7 + Math.random()*1.6})`;
        h.style.animationDelay = (-Math.random()*10) + "s";
        box.appendChild(h);
      }
      // keep it light
      while(box.children.length > 80) box.removeChild(box.firstChild);
    }

    // --- events ---
    $("yourName").addEventListener("input", updateText);
    $("herName").addEventListener("input", updateText);

    $("generateBtn").addEventListener("click", () => {
      generate();
      $("resultBox").classList.remove("show");
    });

    $("copyBtn").addEventListener("click", async () => {
      const codeLine = $("codeText").textContent.replace("LOVE-CODE: ","");
      const ok = await copyToClipboard(codeLine);
      $("copyBtn").textContent = ok ? "Copied ‚úÖ" : "Copy failed";
      setTimeout(()=> $("copyBtn").textContent = "Copy code", 1200);
    });

    $("shareBtn").addEventListener("click", async () => {
      const your = $("yourName").value.trim() || "___";
      const her = $("herName").value.trim() || "___";
      const code = $("codeText").textContent.replace("LOVE-CODE: ","");
      const msg =
`Hey ${her} üíó
It's ${your}.

Will you be my Valentine? üíò
Your love-code is: ${code}

Reply ‚ÄúYES‚Äù to accept üòÖ`;
      const ok = await copyToClipboard(msg);
      $("shareBtn").textContent = ok ? "Message copied ‚úÖ" : "Copy failed";
      setTimeout(()=> $("shareBtn").textContent = "Copy message", 1200);
    });

    $("yesBtn").addEventListener("click", () => {
      const your = $("yourName").value.trim() || "me";
      const her = $("herName").value.trim() || "you";
      $("resultBox").innerHTML =
        `‚úÖ <strong>${her}</strong> accepted!<br>Now ${your} owes a cute date + snacks üç´üåπ`;
      $("resultBox").classList.add("show");
      addHearts(28);
    });

    // playful "NO" button: moves away a bit
    $("noBtn").addEventListener("mouseenter", () => {
      const btn = $("noBtn");
      const dx = (Math.random()*140 - 70);
      const dy = (Math.random()*80 - 40);
      btn.style.transform = `translate(${dx}px, ${dy}px)`;
    });
    $("noBtn").addEventListener("mouseleave", () => {
      $("noBtn").style.transform = "translate(0,0)";
    });
    $("noBtn").addEventListener("click", () => {
      $("resultBox").textContent = "üôà Okay okay‚Ä¶ you can still press YES.";
      $("resultBox").classList.add("show");
    });

    $("makeHearts").addEventListener("click", () => addHearts(22));

    // --- init ---
    const now = new Date();
    $("dateLine").textContent = `Today: ${now.toLocaleDateString(undefined, {weekday:"long", year:"numeric", month:"short", day:"numeric"})}`;
    addHearts(26);
    updateText();
    generate();
  </script>
</body>
</html>
